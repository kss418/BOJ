# [Diamond IV] Building 2 - 17762 

[문제 링크](https://www.acmicpc.net/problem/17762) 

### 성능 요약

메모리: 37180 KB, 시간: 124 ms

### 분류

자료 구조, 트리, 세그먼트 트리, 이분 탐색, 작은 집합에서 큰 집합으로 합치는 테크닉, 가장 긴 증가하는 부분 수열 문제

### 제출 일자

2025년 10월 21일 09:38:47

### 문제 설명

<p>日本には N 個の街があり，それらの間は N − 1 本の双方向に通行可能な道路で結ばれている．どの街か らどの街へもいくつかの道路をたどって行くことができる．各街には役所のビル 1 つがあり，街 i のビル の高さを H<sub>i</sub> とする．</p>

<p>国際情報オリンピックが日本で開かれるに伴い，世界の選手達を歓迎するため，観光ツアーを計画しよ うとしている．観光ツアーは，ある街からスタートし，道路をたどって違う街へ移動することを繰り返し， ある街で終了する．この時，同じ街を 2 度以上訪れることはないようにすることとなっている．</p>

<p>世界の選手たちをより一層歓迎するため，観光で訪れるうちの一部の街の役所のビルを飾り付けること にした．ある著名なデザイナーにデザインを依頼したところ，飾りつけに利用するビルは，出発する街か ら到着する街に向けて高くなっていく必要があると言った．つまり，役所のビルを飾り付けることにした 街を i<sub>1</sub>, i<sub>2</sub>,..., i<sub>k</sub> とおき，観光ツアー中にこれらの街を i<sub>1</sub>, i<sub>2</sub>,..., i<sub>k</sub> という順番で訪れるとしたとき，ビルの 高さが H<sub>i<sub>1</sub></sub> < H<sub>i<sub>2</sub></sub> < ··· < H<sub>i<sub>k</sub></sub> となっていなければならない．（全ての訪れる街のビルを飾り付けなければな らないわけではないことに注意せよ．）</p>

<p>できるだけ飾りつけを華やかにするため，飾りつけに利用するビルの数をできるだけ多くしたい．開始 する街，終了する街，ビルの飾り付けをする街を自由に選べるとしたとき，飾りつけに利用することので きるビルの数の最大値を計算するプログラムを作れ.</p>

### 입력 

 <p>標準入力から以下の入力を読み込め．</p>

<ul>
	<li>1 行目には整数 N が書かれており，街の数を表す．</li>
	<li>続く N 行には，各街の役所のビルの高さに関する情報が与えられる．これらの行のうちの i 行目に は整数 H<sub>i</sub> が書かれている．これは街 i のビルの高さが Hi であることを表す．</li>
	<li>続く N − 1 行には，道路に関する情報が与えられる．これらの行のうちの i 行目には整数 A<sub>i</sub>, B<sub>i</sub> (1 ≤ A<sub>i</sub> < B<sub>i</sub> ≤ N) が空白を区切りとして書かれている．これは i 番目の道路が街 A<sub>i</sub> と街 B<sub>i</sub> を結んで いることを表す．</li>
</ul>

### 출력 

 <p>標準出力に，飾りつけに利用することのできるビルの数の最大値を表す整数を出力せよ．</p>

