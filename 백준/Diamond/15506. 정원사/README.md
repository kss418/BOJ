# [Diamond IV] 정원사 - 15506 

[문제 링크](https://www.acmicpc.net/problem/15506) 

### 성능 요약

메모리: 24168 KB, 시간: 828 ms

### 분류

자료 구조, 우선순위 큐, 세그먼트 트리

### 제출 일자

2025년 7월 10일 23:25:17

### 문제 설명

<p>온조는 N개의 정원을 가꾸는 정원사이다. 모든 정원에는 아직 아무런 식물도 심어져 있지 않고, 각각의 정원에는 식물을 무한정 심을 수 있다. 모든 식물은 하루에 k만큼 자란다. 즉, 높이 h의 어떤 식물이 심어진 날이 x번째 날이라면, y번째 날에는 높이가 h + k(y-x)가 된다. 온조는 M개의 작업을 수행해 N개의 정원을 예쁘게 가꾸려고 한다.</p>

<p>다음은 작업의 종류 세 가지이다: </p>

<ul>
	<li><code>1 t x h</code> : t번째 날에 x번째 정원에 높이가 h인 식물을 하나 추가한다.</li>
	<li><code>2 t l r h</code> : t번째 날에 l번째 정원부터 r번째 정원까지에 심어져 있는 모든 식물들 중에서 높이가 h를 초과한 식물들을 모두 뽑아 버린다.</li>
	<li><code>3 t l r</code> : t번째 날에 l번째 정원부터 r번째 정원까지에 심어져 있는 모든 식물들의 수를 출력한다.</li>
</ul>

<p>온조는 뛰어난 정원사였기 때문에 첫 번째 작업과 두 번째 작업은 손쉽게 할 수 있었지만, 세 번째 작업은 수학에 약한 온조로서는 수행하기 어려웠다. 세 번째 작업에 대한 답을 우리가 대신 해 주자!</p>

### 입력 

 <p>첫째 줄에 정원의 수 N (1 ≤ N ≤ 10<sup>5</sup>)과 온조와 당신이 수행할 작업의 수 M (1 ≤ M ≤ 10<sup>6</sup>), 모든 식물이 하루에 자라는 높이 k (1 ≤ k ≤ 10<sup>9</sup>)가 주어진다. 그 다음 줄부터 M개의 줄에는 작업의 정보가 주어진다. 작업의 정보는 날짜가 증가하는 순으로 주어지고, l과 r, x는 1 이상 N 이하이며, 그 외의 모든 수는 1 이상 10<sup>9</sup> 이하의 자연수이다. 참고로 온조는 같은 날에 두 개의 작업을 하는 것을 원치 않기 때문에, 하루에는 최대 하나의 작업만 수행한다는 것이 보장된다.</p>

### 출력 

 <p>세 번째 작업에 대한 답을 각각의 줄에 출력한다. M개의 작업 중 세 번째 작업이 적어도 하나가 있다는 것이 보장된다.</p>

